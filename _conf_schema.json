{
    "enable": {
        "description": "是否启用智能LLM判断",
        "type": "bool",
        "default": true,
        "hint": "启用后,插件会自动分析消息复杂度并选择合适的模型"
    },
    "judge_provider_id": {
        "description": "【必填】判断模型提供商ID",
        "type": "string",
        "default": "",
        "hint": "用于判断消息复杂度的LLM提供商ID,此项为必填配置",
        "obvious_hint": true,
        "_special": "select_provider"
    },
    "judge_model": {
        "description": "判断模型名称(可选)",
        "type": "string",
        "default": "",
        "hint": "指定判断提供商使用的具体模型,留空则使用提供商默认模型。建议使用轻量快速的模型如 gpt-4o-mini"
    },
    "high_iq_provider_ids": {
        "description": "高智商模型提供商列表",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "用于处理复杂问题的模型提供商ID列表,支持配置多个。插件会随机选择一个使用"
    },
    "high_iq_routes": {
        "description": "高智商路由配对(优先)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "每项为 provider_id:model 形式(模型可省略)。配置后会优先用于 provider/model 配对,避免索引对齐问题。例如: ['openai:gpt-4o','anthropic:claude-3-opus']"
    },
    "enable_high_iq_polling": {
        "description": "是否启用高智商模型轮询",
        "type": "bool",
        "default": true,
        "hint": "启用后,会在高智商提供商列表中随机选择(负载均衡)。关闭后,固定使用列表第一个提供商/模型"
    },
    "enable_command_context": {
        "description": "命令模式启用上下文",
        "type": "bool",
        "default": false,
        "hint": "开启后,/高智商(/大)/快速(/小)/智能问答(/问) 等命令会带上当前会话对话历史,实现多轮追问"
    },
    "command_context_max_turns": {
        "description": "命令模式上下文保留轮数",
        "type": "int",
        "default": 10,
        "hint": "仅在启用命令模式上下文时生效;表示保留最近 N 轮对话(一轮=用户+助手)"
    },
    "enable_budget_control": {
        "description": "启用预算控制(降本)",
        "type": "bool",
        "default": false,
        "hint": "开启后,当判断为 HIGH 时会按预算比例决定是否真正使用高智商模型;关闭则保持原逻辑(判 HIGH 必走高智商)"
    },
    "budget_mode": {
        "description": "预算模式",
        "type": "string",
        "default": "BALANCED",
        "options": ["ECONOMY", "BALANCED", "FLAGSHIP"],
        "hint": "ECONOMY 更省钱,BALANCED 均衡,FLAGSHIP 更注重效果"
    },
    "budget_overrides_json": {
        "description": "预算模式覆盖(按会话/群/用户)",
        "type": "text",
        "default": "",
        "hint": "填写 JSON 对象,键可为 unified_msg_origin/group_id/sender_id,值为 ECONOMY/BALANCED/FLAGSHIP。例如: {\"qq:group:123\":\"ECONOMY\",\"123\":\"FLAGSHIP\"}"
    },
    "economy_high_iq_ratio": {
        "description": "ECONOMY 高智商触发比例(%)",
        "type": "int",
        "default": 20,
        "hint": "0-100,当判断为 HIGH 时,仍有该比例使用高智商模型"
    },
    "balanced_high_iq_ratio": {
        "description": "BALANCED 高智商触发比例(%)",
        "type": "int",
        "default": 60,
        "hint": "0-100,当判断为 HIGH 时,仍有该比例使用高智商模型"
    },
    "flagship_high_iq_ratio": {
        "description": "FLAGSHIP 高智商触发比例(%)",
        "type": "int",
        "default": 95,
        "hint": "0-100,当判断为 HIGH 时,仍有该比例使用高智商模型"
    },
    "enable_rule_prejudge": {
        "description": "启用规则预判(减少判断模型调用)",
        "type": "bool",
        "default": true,
        "hint": "开启后,会先用轻量规则直接判定明显 HIGH/FAST;只有不确定时才调用判断模型"
    },
    "enable_decision_cache": {
        "description": "启用决策缓存(减少判断模型调用)",
        "type": "bool",
        "default": true,
        "hint": "缓存消息的 HIGH/FAST 判定结果,避免重复判断"
    },
    "decision_cache_ttl_seconds": {
        "description": "决策缓存TTL(秒)",
        "type": "int",
        "default": 600,
        "hint": "缓存有效期,过期后重新判断"
    },
    "decision_cache_max_entries": {
        "description": "决策缓存最大条数",
        "type": "int",
        "default": 500,
        "hint": "超过后会自动淘汰旧条目"
    },
    "enable_answer_cache": {
        "description": "启用命令回答缓存(减少重复调用)",
        "type": "bool",
        "default": false,
        "hint": "仅对命令模式(/大、/小、/问等)生效;当开启命令上下文时默认不命中缓存以避免上下文差异"
    },
    "answer_cache_ttl_seconds": {
        "description": "回答缓存TTL(秒)",
        "type": "int",
        "default": 300,
        "hint": "缓存有效期,过期后重新调用模型"
    },
    "answer_cache_max_entries": {
        "description": "回答缓存最大条数",
        "type": "int",
        "default": 200,
        "hint": "超过后会自动淘汰旧条目"
    },
    "high_iq_models": {
        "description": "高智商模型名称列表",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "与提供商列表一一对应的模型名称。如 ['gpt-4o', 'claude-3-opus']。留空则使用提供商默认模型"
    },
    "fast_provider_ids": {
        "description": "快速模型提供商列表",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "用于处理简单问题的模型提供商ID列表,支持配置多个。插件会随机选择一个使用"
    },
    "fast_routes": {
        "description": "快速路由配对(优先)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "每项为 provider_id:model 形式(模型可省略)。配置后会优先用于 provider/model 配对,避免索引对齐问题。例如: ['openai:gpt-4o-mini','google:gemini-1.5-flash']"
    },
    "fast_models": {
        "description": "快速模型名称列表",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "与提供商列表一一对应的模型名称。如 ['gpt-4o-mini', 'claude-3-haiku']。留空则使用提供商默认模型"
    },
    "default_decision": {
        "description": "默认判断结果",
        "type": "string",
        "default": "FAST",
        "options": ["HIGH", "FAST"],
        "hint": "当无法判断消息复杂度时的默认选择"
    },
    "whitelist": {
        "description": "白名单",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "只对白名单中的会话/群组/用户启用智能路由,留空表示对所有会话启用"
    },
    "blacklist": {
        "description": "黑名单",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "黑名单中的会话/群组/用户不启用智能路由"
    },
    "router_whitelist": {
        "description": "路由白名单(仅自动路由)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "仅对自动路由(on_llm_request)生效;为空表示不额外限制"
    },
    "router_blacklist": {
        "description": "路由黑名单(仅自动路由)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "仅对自动路由(on_llm_request)生效"
    },
    "command_whitelist": {
        "description": "指令白名单(仅插件指令)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "仅对插件指令(/大 /小 /问 /judge_*)生效;为空表示不额外限制"
    },
    "command_blacklist": {
        "description": "指令黑名单(仅插件指令)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "仅对插件指令(/大 /小 /问 /judge_*)生效"
    },
    "command_acl_json": {
        "description": "按指令单独ACL(JSON)",
        "type": "text",
        "default": "",
        "hint": "JSON对象: {\"ask_high\":{\"whitelist\":[],\"blacklist\":[]},\"*\":{...}}，键为命令名(如 ask_high/judge_stats)"
    },
    "fast_only_list": {
        "description": "仅允许快速模型列表",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "匹配到的会话/群/用户将只允许快速模型(会阻止 /大)"
    },
    "high_only_list": {
        "description": "仅允许高智商模型列表",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "匹配到的会话/群/用户将只允许高智商模型(会阻止 /小)"
    },
    "enable_policy_notice": {
        "description": "启用策略提示(命令输出)",
        "type": "bool",
        "default": true,
        "hint": "当策略/限制导致模型池被降级或升级时,在命令输出中显示提示"
    },
    "fast_only_action_for_high_cmd": {
        "description": "仅快策略下 /大 行为",
        "type": "string",
        "default": "REJECT",
        "options": ["REJECT", "DOWNGRADE"],
        "hint": "REJECT:直接拒绝; DOWNGRADE:仍执行但改用快速模型"
    },
    "high_only_action_for_fast_cmd": {
        "description": "仅高策略下 /小 行为",
        "type": "string",
        "default": "REJECT",
        "options": ["REJECT", "DOWNGRADE"],
        "hint": "REJECT:直接拒绝; DOWNGRADE:仍执行但改用高智商模型"
    },
    "fast_only_forced_provider_id": {
        "description": "仅快策略强制提供商(可选)",
        "type": "string",
        "default": "",
        "hint": "命中仅快策略时,若填写则固定使用该 provider_id(优先于随机选择)"
    },
    "fast_only_forced_model": {
        "description": "仅快策略强制模型(可选)",
        "type": "string",
        "default": "",
        "hint": "配合仅快策略强制提供商使用;留空则用提供商默认模型"
    },
    "high_only_forced_provider_id": {
        "description": "仅高策略强制提供商(可选)",
        "type": "string",
        "default": "",
        "hint": "命中仅高策略时,若填写则固定使用该 provider_id(优先于随机选择)"
    },
    "high_only_forced_model": {
        "description": "仅高策略强制模型(可选)",
        "type": "string",
        "default": "",
        "hint": "配合仅高策略强制提供商使用;留空则用提供商默认模型"
    },
    "enable_stats": {
        "description": "启用统计",
        "type": "bool",
        "default": true,
        "hint": "启用后可使用 /judge_stats 查看路由与LLM调用统计(内存统计,重启清空)"
    },
    "llm_pending_ttl_seconds": {
        "description": "LLM pending 记录 TTL(秒)",
        "type": "int",
        "default": 300,
        "hint": "用于匹配 on_llm_request/on_llm_response 的临时记录保留时间,超过会清理以防内存增长"
    },
    "llm_pending_cleanup_interval_seconds": {
        "description": "LLM pending 清理间隔(秒)",
        "type": "int",
        "default": 60,
        "hint": "清理过期 pending 的最小间隔;设置为 0 表示每次请求都清理(不推荐)"
    },
    "stats_max_records": {
        "description": "统计记录最大条数",
        "type": "int",
        "default": 200,
        "hint": "内存中保留最近N条统计记录"
    },
    "enable_session_lock": {
        "description": "启用会话锁定/临时覆盖",
        "type": "bool",
        "default": true,
        "hint": "启用后可使用 /judge_lock /judge_unlock 临时锁定 provider/model"
    },
    "session_lock_ttl_seconds": {
        "description": "会话锁定TTL(秒)",
        "type": "int",
        "default": 3600,
        "hint": "超过该时间锁定自动失效"
    },
    "session_lock_cleanup_interval_seconds": {
        "description": "会话锁定清理间隔(秒)",
        "type": "int",
        "default": 60,
        "hint": "清理过期会话锁的最小间隔;设置为 0 表示每次请求都清理(不推荐)"
    },
    "custom_high_keywords": {
        "description": "自定义高智商关键词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "列表中的词出现即判为 HIGH(优先级高于内置规则),例如: ['深度学习','微积分']"
    },
    "custom_fast_keywords": {
        "description": "自定义快速关键词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "列表中的词出现即判为 FAST(优先级高于内置规则与高智商关键词),例如: ['不需要代码','只是问问']"
    },
    "judge_system_prompt": {
        "description": "判断模型 System Prompt",
        "type": "text",
        "default": "",
        "hint": "用于 judge 模型调用的 system_prompt。留空使用内置默认值"
    },
    "simple_keywords_add": {
        "description": "追加内置 FAST 关键词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "在内置 FAST 关键词基础上追加,例如: ['随便聊聊']"
    },
    "simple_keywords_remove": {
        "description": "移除内置 FAST 关键词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "从内置 FAST 关键词中移除,例如: ['你好']"
    },
    "strong_complex_keywords_add": {
        "description": "追加内置 HIGH 强关键词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "在内置 HIGH 强关键词基础上追加"
    },
    "strong_complex_keywords_remove": {
        "description": "移除内置 HIGH 强关键词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "从内置 HIGH 强关键词中移除"
    },
    "weak_complex_keywords_add": {
        "description": "追加内置弱关键词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "在内置弱关键词基础上追加"
    },
    "weak_complex_keywords_remove": {
        "description": "移除内置弱关键词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "从内置弱关键词中移除"
    },
    "weak_need_strong_triggers_add": {
        "description": "追加弱关键词触发 HIGH 的触发词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "当命中弱关键词且同时命中这些触发词时判为 HIGH"
    },
    "weak_need_strong_triggers_remove": {
        "description": "移除弱关键词触发 HIGH 的触发词(列表)",
        "type": "list",
        "items": { "type": "string" },
        "default": [],
        "hint": "从内置触发词中移除"
    },
    "custom_judge_prompt": {
        "description": "自定义判断提示词",
        "type": "text",
        "default": "",
        "hint": "自定义判断消息复杂度的提示词,留空使用默认提示词。需包含 $message 占位符"
    }
}
